cmake_minimum_required(VERSION 2.6)
PROJECT(engine)

if (WIN32)
    set(CMAKE_MODULE_PATH ${ENV_PROGRAMFILES}/OGRE/CMake )
elseif (UNIX)
    set(CMAKE_MODULE_PATH /usr/local/lib/OGRE/cmake )
endif ()

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${PROJECT_SOURCE_DIR}/cmake )

FIND_PACKAGE(OpenGL)
FIND_PACKAGE(OGRE)
FIND_PACKAGE(OIS)
FIND_PACKAGE(Lua51)
FIND_PACKAGE(Luabind)
FIND_PACKAGE(Boost)

INCLUDE_DIRECTORIES(
	${OpenGL_INCLUDE_DIR}
	${OGRE_INCLUDE_DIRS}
	${OIS_INCLUDE_DIRS}
	${Boost_INCLUDE_DIR}
	${LUA_INCLUDE_DIR}
	${LUABIND_INCLUDE_DIR}
	${PROJECT_SOURCE_DIR}/include
	)

FILE(GLOB SRCS src/*.cpp)
FILE(GLOB HDRS include/*.h)
FILE(GLOB SCRIPTS scripts/*.lua scripts/gui/*.lua)

INCLUDE( UnityBuild.cmake )
#enable_unity_build( engine SRCS )

ADD_DEFINITIONS(-DGORILLA_USES_EXCEPTIONS=1)

ADD_EXECUTABLE(engine 
	${SRCS}
	${HDRS}
    ${SCRIPTS}
	)

TARGET_LINK_LIBRARIES(engine
	${OpenGL_LIBRARIES}
	${OIS_LIBRARIES}
	${OGRE_LIBRARIES}
	${Boost_LIBRARIES}
	${LUA_LIBRARIES}
    ${LUABIND_LIBRARIES}
	)

MESSAGE(STATUS ${Boost_INCLUDE_DIR})
